<!DOCTYPE html>

<head>

    <link rel="stylesheet" href="https://ofrohn.github.io/celestial.css">

    <script 
        type="text/javascript" 
        src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js">
    </script>

    <!-- JS9 -->
    <script type="text/javascript" src="static/MouseTouchExtend.js"></script> 
    <link type="text/css" rel="stylesheet" href="static/js9/js9support.css">
    <link type="text/css" rel="stylesheet" href="static/js9/js9.css">
    <script type="text/javascript" src="static/js9/js9prefs.js"></script>
    <script type="text/javascript" src="static/js9/js9support.min.js"></script>
    <script type="text/javascript" src="static/js9/js9.js"></script>
    <script type="text/javascript" src="static/js9/js9plugins.js"></script>

    <link type="text/css" rel="stylesheet" href="static/css/home.css">
    <link type="text/css" rel="stylesheet" href="static/css/obvious-buttons.css">

    <link rel="stylesheet" type="text/css" href="static/css/datatables.css">
    <script type="text/javascript" src="https://cdn.datatables.net/v/bs4/jszip-2.5.0/dt-1.10.18/b-1.5.2/b-colvis-1.5.2/b-html5-1.5.2/cr-1.5.0/kt-2.4.0/r-2.2.2/rg-1.0.3/sc-1.5.0/sl-1.2.6/datatables.min.js"></script>

    <link rel="stylesheet" type="text/css" href="static/slider/nouislider.min.css">
    <script type="text/javascript" src="static/slider/nouislider.min.js"></script>


    <div id="static-state" data-lat={{state.lat}} data-lon={{state.lon}}></div>

    <script 
        type="text/javascript" 
        src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js">
    </script>

</head>

<body>

    <div class="wrapper">
        <section class="header">
            <div class="section-wrapper">
                <h1><a class="title-link" href=".">photon <b>ranch</b></a></h1>

                {% if current_user.is_anonymous %}
                <form class='notloggedin' id="login" method="POST" action="/login">
                    {{ loginform.hidden_tag() }}
                    {{ loginform.username.label }}
                    {{ loginform.username() }}
                    {{ loginform.password.label }}
                    {{ loginform.password() }}
                    {# loginform.remember_me() #}
                    {# loginform.remember_me.label #}
                    {{ loginform.submit() }}
                    <a href="{{ url_for('register') }}"><button id="login-register-button" type="button">Create New Account</button></a>
                </form>
                {% else %}
                <ul class='loggedin'>
                    <li><a href="#">Hello, {{ current_user.username }}</a>
                        <ul class="dropdown">
                            <li><a href="{{ url_for('logout') }}">logout</a></li>
                        </ul>
                    </li>
                </ul>
                {% endif %}
            </div>

        </section>

        <section class="info">

            <div class="statusbar">
                <div class="status" id="status-ra">
                    <div>Ra:</div> 
                    <p id="state-ra">-</p>
                </div>
                <div class="status" id="status-dec">
                    <div>De:</div>
                    <div id="state-de">-</div>
                </div>
                <div class="status" id="status-altitude">
                    <div>Altitude:</div>
                    <div id="state-alt">-&deg;</div>
                </div>
                <div class="status" id="status-action">
                    <div>Telescope:</div>
                    <div id="state-telescope">-</div>
                </div>
                <div class="status" id="status-dome">
                    <div>Dome:</div>
                    <div id="state-dome">-</div>
                </div>
                <div class="status" id="status-siderealtime">
                    <div>Sidereal Time:</div>
                    <div id="state-lmst">-</div>
                </div>

                
            
            </div>
            <div class="views" id="views">
                <div class="views-menu">
                    <ul class="views-tabs">
                        <li class="views-tab" data-tab="viewtab1">sky camera</li> 
                        <li class="views-tab" data-tab="viewtab2">dome camera</li> 
                        <li class="views-tab" data-tab="viewtab3">star map</li> 
                        <li class="views-tab" data-tab="viewtab4" id="js9-tab">images</li> 
                        <li class="views-tab current" data-tab="viewtab5">console</li> 
                    </ul>

                </div>
                <div id="view-size-helper" style="width:100%; height: 100%; top: 60px; position: absolute;">
                
                    <div id="viewtab1" class="views-content">
                        allsky camera feed here 
                    </div>
                    <div id="viewtab2" class="views-content">
                        <div id="dome-cam"></div>
                    </div>
                    <div id="viewtab3" class="views-content">
                        <div class="container">
                            <div class="container" id="celestial-map"></div>
                            <div class="container" id="celestial-form" style="display:none;"></div>
                        </div>
                    </div>
                    <div id="viewtab4" class="views-content">
                        <div class="js9-container" id="default-js9">
                            <div class="JS9Menubar" id="default-js9Menubar" data-buttonClass="JS9Button-flat"></div>
                            <div class="JS9" id="default-js9"></div>
                        </div>
                    </div>
                    <div id="viewtab5" class="views-content current">


                        <form id="textcommand" method="POST" action="/textcommand" data-consolesubmit>
                            <br>
                            <input type="text" name="console-text" style="height: 30px; width: 400px; padding-left: 5px;">
                            <button type="submit" style="height: 30px; width: 100px;">Enter</button>
                            <div><br></div>
                            <table id="cmd-log" style=" font-size: 75%; width: 100%; table-layout: fixed; color: linear-gradient(#aaa, transparent);">
                                <colgroup>
                                    <col style="width: 45%;">
                                    <col style="width: 45%;">
                                    <col style="width: 10%;">
                                </colgroup>
                                <tbody></tbody>
                            </table>
                            <input type="hidden" name="category" value="console">
                        </form>
                    </div>
                
                </div>
            </div>

        </section>

        <section class="controls">

            <div class="module" id="module0">
                <div class="module-head">
                    <div class="module-head-wrapper">
                        <div class="head-title">
                            <h1>0. Dome Controls</h1>
                        </div>
                        <div class="head-inputs">
                            <button class="head-input-item btn btn-inverse button-command" data-category="dome" value="lamp">Lamp</button>
                            <button class="head-input-item btn btn-inverse button-command" data-category="dome" value="ir">IR</button> 
                            <button class="head-input-item btn btn-inverse button-command" data-category="dome" value="roof" >Roof</button>
                        </div>
                    </div>
                </div>
                <div class="module-body" data-collapsed="true" style="height: 0px;">
                    <div class="module-body-wrapper">
                        <p>hello</p>
                    </div>
                </div>
            </div>
            <div class="module" id="module1">
                <div class="module-head">
                    <div class="module-head-wrapper">
                        <div class="head-title">
                            <h1>1. Go to a target</h1>
                        </div>
                        <div class="head-inputs">
                            <form id="goto" method="POST" action="/command" data-autosubmit>
                                <input class="head-input-item" type="text" name="goto-box" id="target-search" placeholder="name or coordinates...">
                                <input class="hidden" type="hidden head-input-item" name="category" value="goto">
                                <button type="submit" class="head-input-item btn btn-success" id="goto-button">GO</button>
                            </form>
                        </div>
                    </div>
                </div>
                <div class=" module-body">
                    <div class="module-body-wrapper" id="module-go">
                        <div id="go-filters" class="container">
                            <div>
                                <input type="checkbox" name="stars" id="stars-check">
                                <label for="stars-check">Stars</label><br>
                                <input type="checkbox" name="open-clusters" id="open-clusters-check">
                                <label for="open-clusters-check">Open Clusters</label><br>
                                <input type="checkbox" name="globular-clusters" id="globular-clusters-check">
                                <label for="globular-clusters-check">Globular Clusters</label><br>
                                <input type="checkbox" name="galaxies" id="galaxies-check">
                                <label for="galaxies-check">Galaxies</label><br>
                                <input type="checkbox" name="nebula" id="nebula-check">
                                <label for="nebula-check">Nebulae</label><br>
                            </div>
                            <div>
                                <input type="checkbox" name="ngc" id="ngc-check">
                                <label for="ngc-check">NGC</label><br>
                                <input type="checkbox" name="messier" id="messier-check">
                                <label for="messier-check">Messier</label><br>
                                <input type="checkbox" name="caldwell" id="caldwell-check">
                                <label for="caldwell-check">Caldwell</label><br>
                            </div>
                            <div>
                                <div id="mag-filter-slider"></div>
                            </div>

                            <div>
                                <button class="btn btn-small">Variable Stars</button>
                                <button class="btn btn-small">Landolt Stars</button>
                                <button class="btn btn-small">Near Zenith</button>
                            </div>
                        </div>
                        <div id="go-table">
                            <table id="targets-table">
                                <thead>
                                    <tr>
                                        <th>Cat</th>
                                        <th>ID</th>
                                        <th>Mag</th>
                                        <th>RA</th>
                                        <th>DE</th>
                                        <!--th>Size</th-->
                                        <th>Type</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                       
                    </div>
                </div>
            </div>
            <div class="module" id="module2">
                <div class="module-head">
                    <div class="module-head-wrapper">
                        <div class="head-title">
                            <h1>2. Image Settings</h1>
                        </div>
                        <div class="head-inputs">
                            <form>
                                <input class="head-input-item" type="text" id="time"placeholder=" time... ">
                                <input class="head-input-item" type="text" id="count"placeholder=" amount... "> 
                                <button class="head-input-item btn" id="expose-button">Expose</button>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="testmodule-body module-body">
                    <div class="module-body-wrapper">
                        Module Body
                        <ul>
                            <li>1</li>
                            <li>2</li>
                            <li>3</li>
                            <li>4</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="module" id="module3">
                <div class="module-head">
                    <div class="module-head-wrapper">
                        <div class="head-title">
                            <h1>Test Module</h1>
                        </div>
                        <div class="head-inputs">
                            <form>
                                <input class="head-input-item" type="text"placeholder="search...">
                                <button class="head-input-item btn btn-inverse">GO</button>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="testmodule-body module-body">
                    <div class="module-body-wrapper">
                        Module Body
                        <ul>
                            <li>1</li>
                            <li>2</li>
                            <li>3</li>
                            <li>4</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="module hidden" id="module4">
                <div class="module-head">
                    <div class="module-head-wrapper">
                        <div class="head-title">
                            <h1>Test Module</h1>
                        </div>
                        <div class="head-inputs">
                            <input type="text"placeholder="search...">
                            <button>GO</button>
                        </div>
                    </div>
                </div>
                <div class="testmodule-body module-body">
                    <div class="module-body-wrapper">
                        Module Body
                        <ul>
                            <li>1</li>
                            <li>2</li>
                            <li>3</li>
                            <li>4</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="module hidden" id="module5">
                <div class="module-head">
                    <div class="module-head-wrapper">
                        <div class="head-title">
                            <h1>Test Module</h1>
                        </div>
                        <div class="head-inputs">
                            <input type="text"placeholder="search...">
                            <button >GO</button>
                        </div>
                    </div>
                </div>
                <div class="testmodule-body module-body">
                    <div class="module-body-wrapper">
                        Module Body
                        <ul>
                            <li>1</li>
                            <li>2</li>
                            <li>3</li>
                            <li>4</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="module hidden" id="module6">
                <div class="module-head">
                    <div class="module-head-wrapper">
                        <div class="head-title">
                            <h1>Test Module</h1>
                        </div>
                        <div class="head-inputs">
                            <input type="text"placeholder="search...">
                            <button>GO</button>
                        </div>
                    </div>
                </div>
                <div class="testmodule-body module-body">
                    <div class="module-body-wrapper">
                        Module Body
                        <ul>
                            <li>1</li>
                            <li>2</li>
                            <li>3</li>
                            <li>4</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div style="height:2000px; font: 96px/1 'Oswald', serif; color: #777; text-align: center; opacity: 0.05;">&Omega;</div>



        </section>

        <section class="scroll-icons">

            <div class="scroll-button" data-id="0" id="scroll-0">0</div>
            <div class="scroll-button" data-id="1" id="scroll-1">1</div>
            <div class="scroll-button" data-id="2" id="scroll-2">2</div>
            <div class="scroll-button" data-id="3" id="scroll-3">3</div>
            <div class="scroll-button" data-id="4" id="scroll-4">4</div>
            <div class="scroll-button" data-id="5" id="scroll-5">5</div>
            <div class="scroll-button" data-id="6" id="scroll-6">6</div>

        </section>


    </div>

<script> /* global functions */
// JS9 Coordinates:
var js9crosshair_ra // = JS9.js9crosshair_ra;
var js9corsshair_dec // = JS9.js9crosshair_dec;

var lmst = 15.000;
</script>

<script> /* proper loading/resizing of map and js9 */
    $('#views').ready(function(){
        JS9.Preload('static/images/555wmos.fits', {display: "default-js9"});
        js9resize("default-js9");
        $(window).resize(function(){
            js9resize("default-js9");
        });
    });
    function js9resize(display) {
        let width = $('#view-size-helper').width();
        let height = $('#view-size-helper').height() - 60;
        JS9.ResizeDisplay(width, height, {display: display });
    }

</script>


<script type="text/javascript" src="static/utilities.js"></script>
<script type="text/javascript" src="static/userinterface.js"></script>
<script type="text/javascript" src="static/d3.js"></script>
<script type="text/javascript" src="static/d3.geo.projection.min.js"></script>
<script type="text/javascript" src="static/celestial.js"></script>
<script type="text/javascript" src="static/skymap.js"></script>
<script src="https://d3js.org/d3-drag.v1.min.js"></script>
<script type="text/javascript" src="static/table.js"></script>
<script type="text/javascript" src="static/livefeed.js"></script>
<script type="text/javascript" src="static/ajax_submit.js"></script>
<script type="text/javascript" src="static/receive_state.js"></script>
</body>