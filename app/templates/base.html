<!DOCTYPE html>
<html lang="en">
<head>
    {% block head %}
    <title>{% block title %}{% endblock %}PTR</title>
    {% endblock %}

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- mdl style -->
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.red-indigo.min.css" />
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <!--link type="text/css" rel="stylesheet" href="static/css/obvious-buttons.css"-->

    <!-- Bootstrap -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

    <link rel="shortcut icon" href="{{ url_for('static', filename='images/favicon.ico') }}">
    <link type="text/css" rel="stylesheet" href="static/css/darkly-bootstrap.css">
    <link type="text/css" rel="stylesheet" href="static/css/home.css">

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"> </script>

    <!-- Fast detection of div resize for animation that toggles the map filters sliding in and out. -->
    <script src="static/libraries/ResizeSensor.js"></script>

    <style> h3{font-size: 1.17em;} h1{font-size: 1.5em;}</style>

</head>
<body>

    <div class="wrapper">

        {% include "header.html" %}

        <section class="info">

                <!--table class="statusbar">
                    <thead>
                        <tr>
                            <th class="tablebuffer"></th>
                            <th>Ra:</th>
                            <th>De:</th>
                            <th>Altitude:</th>
                            <th>Azimuth:</th>
                            <th>Telescope:</th>
                            <th>Roof:</th>
                            <th>Sidereal Time:</th>
                            <th class="tablebuffer"></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="tablebuffer"></td>
                            <td id="state-ra">-</td>
                            <td id="state-de">-</td>
                            <td id="state-alt">-&deg;</td>
                            <td id="state-az">-&deg;</td>
                            <td id="state-telescope">-</td>
                            <td id="state-enclosure">-</td>
                            <td id="state-lmst">-</td>
                            <td class="tablebuffer"></td>
                        </tr>
                    </tbody>
                </table-->


            <div class="statusbar">
                <div class="status">
                    <div>Ra:</div>
                    <p id="state-ra">-</p>
                </div>
                <div class="status">
                    <div>De:</div>
                    <div id="state-de">-</div>
                </div>
                <div class="status">
                    <div>Altitude:</div>
                    <div id="state-alt">-&deg;</div>
                </div>
                <div class="status">
                    <div>Azimuth:</div>
                    <div id="state-az">-&deg;</div>
                </div>
                <div class="status">
                    <div>Telescope:</div>
                    <div id="state-telescope">-</div>
                </div>
                <div class="status">
                    <div>Roof:</div>
                    <div id="state-enclosure">-</div>
                </div>
                <div class="status">
                    <div>Sidereal Time:</div>
                    <div id="state-lmst">-</div>
                </div>
            </div>

            <div class="views" id="views">
                {% include "views/viewscontent.html" %}
            </div>

        </section>

        <section class="controls">
            {% include "modules/enclosuremodule.html" %}
            {% include "modules/cameramodule.html" %}
            {% include "modules/gotomodule.html" %}
            {% include "modules/searchmodule.html" %}
            {% include "modules/batchimaging.html" %}
            {% include "modules/basemodule.html" %}
            <div style="height:2000px; font: 96px/1 'Oswald', serif; color: #777; text-align: center; opacity: 0.05;">&Omega;</div>
        </section>

        <!-- Scroll Buttons (red, far right side of screen) -->
        <section class="scroll-icons">
            <div class="scroll-button" data-id="1" id="scroll-1">
                <i class="material-icons md-24">camera</i></div>
            <div class="scroll-button" data-id="2" id="scroll-2">
                <i class="material-icons md-24">list</i></div>
            <div class="scroll-button" data-id="3" id="scroll-3"></div>
            <div class="scroll-button" data-id="4" id="scroll-4"></div>
            <div class="scroll-button-false" data-id="5" id="scroll-5">
                <a href="/starparty"><i id="coloricon" class="material-icons md-24" data-curretcolors='default'>stars</i></a>
            </div>
            <div class="scroll-button-false" data-id="6" id="night-colors" data-currentcolors='default'>
                <i id="coloricon" class="material-icons md-24" data-curretcolors='default'>colorize</i></div>
        </section>

    </div>


    <!-- Toast: unobtrusive popup confirming action success or failure (via google's mdl) -->
    <div aria-live="assertive" aria-atomic="true" aria-relevant="text" class="mdl-snackbar mdl-js-snackbar">
        <div class="mdl-snackbar__text"></div>
        <button type="button" class="mdl-snackbar__action"></button>
    </div>


<!--script> /* global functions */
    // JS9 Coordinates:
    var js9crosshair_ra // = JS9.js9crosshair_ra;
    var js9corsshair_dec // = JS9.js9crosshair_dec;

    var lmst = 15.000;
</script-->

<!-- Plotly.js -->
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

<script>
    function plot_weather(){
        $.ajax({
            url: "plot_weather/W",
            success: function(the_data) {
                
                var graphs = JSON.parse(the_data);
                var ids = ['plot-0', 'plot-1'];

                for(var i in graphs) {
                    Plotly.newPlot(ids[i], graphs[i].data, graphs[i].layout, {responsive: true});
                };
            },
            error: function() {
                console.log('failed to update weather plot data');
            }
        })
    }
    plot_weather();
    setInterval(plot_weather(), 1000);
</script>


<!-- Other CSS -->

<link rel="stylesheet" href="https://ofrohn.github.io/celestial.css">
<link id="datatables-css" rel="stylesheet" type="text/css" href="static/css/datatables.css">

<script type="text/javascript" src="static/colors.js"></script>

<!-- DataTables -->
<script type="text/javascript" src="https://cdn.datatables.net/v/bs4/jszip-2.5.0/dt-1.10.18/b-1.5.2/b-colvis-1.5.2/b-html5-1.5.2/cr-1.5.0/kt-2.4.0/r-2.2.2/rg-1.0.3/sc-1.5.0/sl-1.2.6/datatables.min.js"></script>

<script type="text/javascript" src="static/utilities.js"></script>

<!-- D3js and Sky Chart -->
<script src="https://d3js.org/d3.v3.min.js"></script>
<script src="https://d3js.org/d3-geo-projection.v2.min.js"></script>
<script src="https://d3js.org/d3-drag.v1.min.js"></script>
<script type="text/javascript" src="static/celestial.js"></script>
<script type="text/javascript" src="static/skymap.js"></script>

<script type="text/javascript" src="static/userinterface.js"></script>
<script type="text/javascript" src="static/table.js"></script>
<script type="text/javascript" src="static/ajax_submit.js"></script>
<script type="text/javascript" src="static/receive_state.js"></script>

<script type="text/javascript" src="static/livefeed.js"></script>
</body>
